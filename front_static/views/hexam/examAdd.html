<title>添加题目</title>
<!--添加单选题-->
<div class="addlist examAdd" ng-show="chose_type==1">
    <div class="data-inner">
        <h3 class="yellow">添加单选题</h3>
        <form class="form" name="resetss" novalidate>
            <div class="form-item">
                <label for="name">题干</label>
                <input type="text" name="name" placeholder="题干" id="name" ng-model="updates.name"
                       required
                       ng-maxlength="100">
                <div class="common-err" ng-show="resetss.name.$invalid && submitted">这是一个必填字段</div>
            </div>
            <div class="form-item">
                <label>答案A</label>
                <input name="a_ans" ng-model="updates.a_ans" required>
                <p><input type="radio" name="danxuan" value="A" ng-model="updates.right_key" required>正确答案</p>
                <div class="common-err" ng-show="resetss.a_ans.$invalid && submitted">请填写答案A</div>
            </div>
            <div class="form-item">
                <label>答案B</label>
                <input type="text" name="b_ans" ng-model="updates.b_ans" required>
                <p><input type="radio" name="danxuan" value="B" ng-model="updates.right_key" required>正确答案</p>
                <div class="common-err" ng-show="resetss.b_ans.$invalid && submitted">请填写答案B</div>
            </div>
            <div class="form-item">
                <label>答案C</label>
                <input type="text" name="c_ans" ng-model="updates.c_ans" required>
                <p><input type="radio" name="danxuan" value="C" ng-model="updates.right_key" required>正确答案</p>
                <div class="common-err" ng-show="resetss.c_ans.$invalid && submitted">请填写答案C</div>
            </div>
            <div class="form-item">
                <label>答案D</label>
                <input type="text" name="d_ans" ng-model="updates.d_ans" required>
                <p><input type="radio" name="danxuan" value="D" ng-model="updates.right_key" required>正确答案</p>
                <div class="common-err" ng-show="resetss.d_ans.$invalid && submitted">请填写答案D</div>
            </div>
            <div class="common-err" ng-show="resetss.danxuan.$invalid && submitted">请选择一个正确答案</div>
            <div class="form-item">
                <label>适用人群</label>
                <select name="role" ng-model="updates.role" required>
                    <option value="">请选择</option>
                    <option value="2">药师</option>
                    <option value="3">医生</option>
                    <option value="4">护士</option>
                    <option value="5">学生</option>
                    <option value="1">其他</option>
                </select>
                <div class="common-err" ng-show="resetss.role.$invalid && submitted">请选择适合人群</div>
            </div>
            <div class="form-item">
                <label>分值</label>
                <input type="text" name="score" ng-pattern="/^[1-9]*[0-9]+$/" ng-model="updates.score" required>
                <div class="common-err" ng-show="resetss.score.$invalid && submitted">请填写分值,必须是正整数</div>
            </div>
            <div class="form-item" ng-if="updates.role==2">
                <label>职务</label>
                <select name="post" ng-model="updates.post" required>
                    <option value="">请选择</option>
                    <option value="2">临床药师</option>
                    <option value="3">咨询药师</option>
                    <option value="4">调剂药师</option>
                    <option value="5">执业药师</option>
                    <option value="1">其他</option>
                </select>
                <div class="common-err" ng-show="resetss.post.$invalid && submitted">请选择职务</div>
            </div>
            <div class="form-item">
                <label>药学分类</label>
                <select ng-model="updates.pharmacy_id" id="pharmacy_id"
                        ng-bind-html="category|to_trusted" ng-change="changed()" name="asdd">
                </select>
                <div class="common-err" ng-show="resetss.asdd.$invalid && submitted">请选择药学分类</div>
            </div>
            <div class="form-item" ng-if="show_therapeutic">
                <label>治疗领域</label>
                <input type="text" name="therapeutic" ng-model="updates.therapeutic" required>
                <div class="common-err" ng-show="resetss.therapeutic.$invalid && submitted">请填写治疗领域</div>
            </div>
            <div class="form-item">
                <label>归属题库</label>
                <select name="questions_id" ng-model="updates.questions_id" required>
                    <option value selected>请选择</option>
                    <option value="{{q.id}}" ng-repeat="q in questions track by $index">{{q.name}}</option>
                </select>
                <div class="common-err" ng-show="resetss.questions_id.$invalid && submitted">请填写归属题库</div>
            </div>

            <div class="form-item">
                <label>解析</label>
                <div name="analysis" id="analysis1" ng-model="updates.analysis"></div>
                <div class="common-err" ng-show="id_an && submitted">请填写解析</div>
            </div>
            <div class="step">
                <button class="last-step" ng-click="add_hass = 0">取消</button>
                <button class="next-step" ng-click="chose(resetss.$valid)">生成</button>
            </div>
        </form>
    </div>
</div>


<!--添加多选题-->
<div class="addlist examAdd" ng-show="chose_type==2">
    <div class="data-inner">
        <h3 class="yellow">添加多选题</h3>
        <form class="form" name="reset" novalidate>
            <div class="form-item">
                <label for="name">题干</label>
                <input type="text" name="name" class="form-control" placeholder="请输入题干信息" ng-model="updates.name"
                       required>
                <div class="common-err" ng-show="reset.name.$invalid && submitted">这是一个必填字段</div>
            </div>
            <div class="form-item">
                <label>答案A</label>
                <input type="text" name="a_ans" class="form-control" ng-model="updates.a_ans" required>
                <p><input type="checkbox" class="right_key1" name="danxuan" value="A" ng-model="updates.right_key1">正确答案</p>
                <div class="common-err" ng-show="reset.a_ans.$invalid && submitted">请填写答案A</div>
            </div>
            <div class="form-item">
                <label>答案B</label>
                <input type="text" name="b_ans" class="form-control" ng-model="updates.b_ans"required>
                <p><input type="checkbox" class="right_key2" name="danxuan" value="B" ng-model="updates.right_key2">正确答案</p>
                <div class="common-err" ng-show="reset.b_ans.$invalid && submitted">请填写答案B</div>
            </div>
            <div class="form-item">
                <label>答案C</label>
                <input type="text" name="c_ans" class="form-control" ng-model="updates.c_ans"required>
                <p><input type="checkbox" class="right_key3" name="danxuan" value="C" ng-model="updates.right_key3">正确答案</p>
                <div class="common-err" ng-show="reset.c_ans.$invalid && submitted">请填写答案C</div>
            </div>
            <div class="form-item">
                <label>答案D</label>
                <input type="text" name="d_ans" class="form-control" ng-model="updates.d_ans"required>
                <p><input type="checkbox" class="right_key4" name="danxuan" value="D" ng-model="updates.right_key4">正确答案</p>
                <div class="common-err" ng-show="reset.d_ans.$invalid && submitted">请填写答案D</div>
            </div>
            <div class="common-err" ng-show="!(updates.right_key4||updates.right_key3||updates.right_key2||updates.right_key1) && submitted">请至少选择一个正确答案</div>
            <!--&lt;!&ndash;点击 添加题目按钮，按钮消失答案E出现&ndash;&gt;-->
            <!--<button class="button-click add-btn">添加题目</button>-->
            <!--<div class="form-item">-->
                <!--<label>答案E</label>-->
                <!--<input id="dd" name="remark" type="text" ng-model="updates.remark">-->
                <!--<p><input type="checkbox">正确答案</p>-->
            <!--</div>-->
            <div class="form-item">
                <label>适用人群</label>
                <select name="role" ng-model="updates.role" required>
                    <option value="">请选择</option>
                    <option value="2">药师</option>
                    <option value="3">医生</option>
                    <option value="4">护士</option>
                    <option value="5">学生</option>
                    <option value="1">其他</option>
                </select>
                <div class="common-err" ng-show="reset.role.$invalid && submitted">请选择适合人群</div>
            </div>
            <div class="form-item" ng-if="updates.role==2">
                <label>职务</label>
                <select name="post" ng-model="updates.post" required>
                    <option value="">请选择</option>
                    <option value="2">临床药师</option>
                    <option value="3">咨询药师</option>
                    <option value="4">调剂药师</option>
                    <option value="5">执业药师</option>
                    <option value="1">其他</option>
                </select>
                <div class="common-err" ng-show="reset.post.$invalid && submitted">请选择职务</div>
            </div>
            <div class="form-item">
                <label>分值</label>
                <input type="text" name="score" ng-pattern="/^[1-9]*[0-9]+$/" ng-model="updates.score" required>
                <div class="common-err" ng-show="reset.score.$invalid && submitted">请填写分值,必须是正整数</div>
            </div>
            <div class="form-item">
                <label>药学分类</label>
                <select ng-model="updates.pharmacy_id" id="pharmacy_id"
                        ng-bind-html="category|to_trusted" ng-change="changed()" name="asdd">
                </select>
                <div class="common-err" ng-show="reset.asdd.$invalid && submitted">请选择药学分类</div>
            </div>
            <div class="form-item" ng-if="show_therapeutic">
                <label>治疗领域</label>
                <input type="text" name="therapeutic" ng-model="updates.therapeutic" required>
                <div class="common-err" ng-show="reset.therapeutic.$invalid && submitted">请填写治疗领域</div>
            </div>
            <div class="form-item">
                <label>归属题库</label>
                <select name="questions_id" ng-model="updates.questions_id" required>
                    <option value selected>请选择</option>
                    <option value="{{q.id}}" ng-repeat="q in questions track by $index">{{q.name}}</option>
                </select>
                <div class="common-err" ng-show="reset.questions_id.$invalid && submitted">请填写归属题库</div>
            </div>

            <div class="form-item">
                <label>解析</label>
                <div name="analysis" id="analysis2" ng-model="updates.analysis"></div>
                <div class="common-err" ng-show="id_an && submitted">请填写解析</div>
            </div>
            <div class="step">
                <button class="last-step" ng-click="add_hass = 0">取消</button>
                <button class="next-step" ng-click="chose(reset.$valid)">生成</button>
            </div>
        </form>
    </div>
</div>

<!--添加处方审核题-->
<div class="addlist examAdd" ng-show="chose_type==4||chose_type==5">
    <div class="data-inner">
        <h3 class="yellow">添加处方审核题</h3>
        <form class="form" name="resets4" novalidate>
            <div class="form-item">
                <label for="name">题干</label>
                <input type="text" name="name" placeholder="题干" ng-model="updates.name" required
                       ng-maxlength="100">
                <p>注：题干中需要的信息患者年龄、性别、诊断（疾病）</p>
                <div class="common-err" ng-show="resets4.name.$invalid && submitted">这是一个必填字段</div>
            </div>
            <div class="status form-item">
                <div class="pic">
                    <label for="name">处方图片</label>
                    <div class="plus">
                        <input type="file" id="photo" ng-click="photo()">
                    </div>
                    <img id="head" ng-src="{{updates.photo}}" alt="" style="width:100px;height: 100px;"
                         ng-show="updates.photo != undefined">
                    <div class="common-err" ng-show="updates.photo == undefined && submitted">请上传图片</div>
                    <p>注：上传的图片不得大于xM，尺寸</p>
                </div>
            </div>
            <div class="form-item">
                <label>分值</label>
                <input type="text" name="score" ng-pattern="/^[1-9]*[0-9]+$/" ng-model="updates.score" required>
                <div class="common-err" ng-show="resets4.score.$invalid && submitted">请填写分值</div>
            </div>
            <div class="form-item">
                <label>答案</label>
                <div name="right_key" id="right_key4" ng-model="updates.right_key"></div>
                <div class="common-err" ng-show="id_key && submitted">请填写答案</div>
            </div>
            <div class="form-item">
                <label>适用人群</label>
                <select name="role" ng-model="updates.role" required>
                    <option value="">请选择</option>
                    <option value="2">药师</option>
                    <option value="3">医生</option>
                    <option value="4">护士</option>
                    <option value="5">学生</option>
                    <option value="1">其他</option>
                </select>
                <div class="common-err" ng-show="resets4.role.$invalid && submitted">请选择适合人群</div>
            </div>
            <div class="form-item" ng-if="updates.role==2">
                <label>职务</label>
                <select name="post" ng-model="updates.post" required>
                    <option value="">请选择</option>
                    <option value="2">临床药师</option>
                    <option value="3">咨询药师</option>
                    <option value="4">调剂药师</option>
                    <option value="5">执业药师</option>
                    <option value="1">其他</option>
                </select>
                <div class="common-err" ng-show="resets4.post.$invalid && submitted">请选择职务</div>
            </div>
            <div class="form-item">
                <label>药学分类</label>
                <select ng-model="updates.pharmacy_id" id="pharmacy_id"
                        ng-bind-html="category|to_trusted" ng-change="changed()" name="asdd">
                </select>
                <div class="common-err" ng-show="resets4.asdd.$invalid && submitted">请选择药学分类</div>
            </div>
            <div class="form-item" ng-if="show_therapeutic">
                <label>治疗领域</label>
                <input type="text" name="therapeutic" ng-model="updates.therapeutic" required>
                <div class="common-err" ng-show="resets4.therapeutic.$invalid && submitted">请填写治疗领域</div>
            </div>
            <div class="form-item">
                <label>归属题库</label>
                <select name="questions_id" ng-model="updates.questions_id" required>
                    <option value selected>请选择</option>
                    <option value="{{q.id}}" ng-repeat="q in questions track by $index">{{q.name}}</option>
                </select>
                <div class="common-err" ng-show="resets4.questions_id.$invalid && submitted">请填写归属题库</div>
            </div>

            <div class="form-item">
                <label>解析</label>
                <div name="analysis" id="analysis4" ng-model="updates.analysis"></div>
                <div class="common-err" ng-show="id_an && submitted">请填写解析</div>
            </div>
            <!--<div class="form-item">-->
                <!--<a class="yellow">更多 >></a>-->
            <!--</div>-->
            <div class="step">
                <button class="last-step" ng-click="add_hass = 0">取消</button>
                <button class="next-step" ng-click="chose(resets4.$valid)">生成</button>
            </div>
        </form>
    </div>
</div>

<!--添加问答题-->
<div class="addlist examAdd" ng-show="chose_type==6">
    <div class="data-inner">
        <h3 class="yellow">添加添加问答题</h3>
        <form class="form" name="resets6" novalidate>
            <div class="form-item">
                <label for="name">题干</label>
                <input type="text" name="name" placeholder="题干" ng-model="updates.name" required
                       ng-maxlength="100">
                <div class="common-err" ng-show="resets6.name.$invalid && submitted">这是一个必填字段</div>
            </div>
            <!--<div class="status form-item">-->
                <!--<div class="pic">-->
                    <!--<label for="name">处方图片</label>-->
                    <!--<div class="plus">-->
                        <!--<input type="file" class="photo">-->
                    <!--</div>-->
                    <!--<p>注：上传的图片不得大于xM，尺寸</p>-->
                <!--</div>-->
            <!--</div>-->
            <div class="form-item">
                <label>分值</label>
                <input type="text" name="score" ng-pattern="/^[1-9]*[0-9]+$/" ng-model="updates.score" required>
                <div class="common-err" ng-show="resets6.score.$invalid && submitted">请填写分值</div>
            </div>
            <div class="form-item">
                <label>答案</label>
                <div name="right_key" id="right_key6" ng-model="updates.right_key"></div>
                <div class="common-err" ng-show="id_key && submitted">请填写答案</div>
            </div>
            <div class="form-item">
                <label>适用人群</label>
                <select name="role" ng-model="updates.role" required>
                    <option value="">请选择</option>
                    <option value="2">药师</option>
                    <option value="3">医生</option>
                    <option value="4">护士</option>
                    <option value="5">学生</option>
                    <option value="1">其他</option>
                </select>
                <div class="common-err" ng-show="resets6.role.$invalid && submitted">请选择适合人群</div>
            </div>
            <div class="form-item" ng-if="updates.role==2">
                <label>职务</label>
                <select name="post" ng-model="updates.post" required>
                    <option value="">请选择</option>
                    <option value="2">临床药师</option>
                    <option value="3">咨询药师</option>
                    <option value="4">调剂药师</option>
                    <option value="5">执业药师</option>
                    <option value="1">其他</option>
                </select>
                <div class="common-err" ng-show="resets6.post.$invalid && submitted">请选择职务</div>
            </div>
            <div class="form-item">
                <label>药学分类</label>
                <select ng-model="updates.pharmacy_id" id="pharmacy_id"
                        ng-bind-html="category|to_trusted" ng-change="changed()" name="asdd">
                </select>
                <div class="common-err" ng-show="resets6.asdd.$invalid && submitted">请选择药学分类</div>
            </div>
            <div class="form-item" ng-if="show_therapeutic">
                <label>治疗领域</label>
                <input type="text" name="therapeutic" ng-model="updates.therapeutic" required>
                <div class="common-err" ng-show="resets6.therapeutic.$invalid && submitted">请填写治疗领域</div>
            </div>
            <div class="form-item">
                <label>归属题库</label>
                <select name="questions_id" ng-model="updates.questions_id" required>
                    <option value selected>请选择</option>
                    <option value="{{q.id}}" ng-repeat="q in questions track by $index">{{q.name}}</option>
                </select>
                <div class="common-err" ng-show="resets6.questions_id.$invalid && submitted">请填写归属题库</div>
            </div>

            <div class="form-item">
                <label>解析</label>
                <div name="analysis" id="analysis6" ng-model="updates.analysis"></div>
                <div class="common-err" ng-show="id_an && submitted">请填写解析</div>
            </div>
            <div class="step">
                <button class="last-step" ng-click="add_hass = 0">取消</button>
                <button class="next-step" ng-click="chose(resets6.$valid)">生成</button>
            </div>
        </form>
    </div>
</div>

<script>
    $(function () {
        $('#analysis1,#analysis2,#analysis4,#analysis6,#right_key4,#right_key6').editable({
            inlineMode: false,
            alwaysBlank: true,
            language: "zh_cn",
            direction: "ltr",
            autosave: true,
            autosaveInterval: 2500,
            saveParams: { postId: "123" },
            spellcheck: true,
            plainPaste: true,
            enableScript: false,
            imageUploadURL: '/editor/up/img.json',//上传到本地服务器
            imageUploadParams: {id: "edit"},
            imageDeleteURL: '/editor/del/img.json',//删除图片
            imagesLoadURL: 'lib/load_images.php'//管理图片
        }).on('editable.afterRemoveImage', function (e, editor, $img) {
            editor.options.imageDeleteParams = {src: $img.attr('src')};
            // Make the delete request
            editor.deleteImage($img);
        });
    });
</script>
























































